# üëÇ Leli: A Ouvidoria Inteligente (Dados e Sentimento)

> **Respons√°vel:** Leli
> **Miss√£o:** "Dar poder ao cidad√£o". Provar para o usu√°rio que a opini√£o dele n√£o foi para o lixo, transformando conversas individuais em estat√≠sticas de press√£o p√∫blica.

## üéØ Objetivo do M√≥dulo
O m√≥dulo `leli` escuta passivamente as conversas do `whatsappchatbot`, analisa o sentimento e categoriza as demandas. Ele alimenta o Dashboard e gera os "Relat√≥rios de Impacto" para fechar o ciclo de feedback. Cada intera√ß√£o fica registrada em um MongoDB hospedado em Azure Container Instances (exposto para leitura pelo Leli e demais ferramentas) para consulta ou ETL pr√≥prios.

### üîó Conex√£o com Regras de Neg√≥cio
* **Sentimento de Pertencimento:** O usu√°rio precisa sentir que foi ouvido.
* **Viabilidade e Valor:** Transforma dados qualitativos (reclama√ß√µes no zap) em dados quantitativos (Business Intelligence para ONGs/Governo).
* **Escalabilidade:** Processamento ass√≠ncrono (n√£o trava o chat).

---

## üõ† Especifica√ß√£o T√©cnica

### Stack
* **Backend:** Python (Processamento de Texto e API para o Dashboard).
* **Database:** SQLite (dev) -> PostgreSQL (prod).
* **NLP:** Bibliotecas simples (`TextBlob` ou `VADER`) ou GPT-4o-mini (mais preciso para PT-BR).
* **Frontend:** React + Recharts (Visualiza√ß√£o).

### üåä Fluxo de Dados (Pipeline)

```mermaid
sequenceDiagram
    participant Chat as whatsappchatbot (Chat Logs)
    participant Worker as Leli Worker (Python)
    participant DB as Banco de Dados
    participant Dash as Dashboard React
    participant User as Usu√°rio Final

    Chat->>DB: Salva Log da Conversa
    loop A cada 5 minutos
        Worker->>DB: Busca conversas n√£o processadas
        Worker->>Worker: Analisa Sentimento (0 a 10 de Indigna√ß√£o)
        Worker->>Worker: Extrai Tags (Ex: #Saude, #BairroX)
        Worker->>DB: Atualiza Estat√≠sticas
    end
    
    Dash->>DB: Consome JSON de estat√≠sticas
    Dash->>Dash: Renderiza Mapa de Calor
    
    Note over Worker, User: Feedback Loop (O diferencial)
    Worker->>Worker: Detecta pico de reclama√ß√£o sobre "Buraco na Rua"
    Worker->>Chat: Trigger: Enviar msg "Sua reclama√ß√£o virou relat√≥rio!"
    Chat->>User: Notifica√ß√£o de Sucesso
````

### üß† Detalhes de Implementa√ß√£o

#### 1\. An√°lise de Sentimento

N√£o complique. Crie 4 categorias simples:

1.  **D√∫vida** (Neutro)
2.  **Apoio** (Positivo)
3.  **Reclama√ß√£o/Raiva** (Negativo)
4.  **Medo/Fake News** (Alerta)

#### 2\. O Dashboard (MVP)

Uma tela React simples com 3 componentes:

  * **Contador:** "Pessoas ouvidas hoje".
  * **Gr√°fico de Pizza:** "Principais Temas" (Sa√∫de, Seguran√ßa, etc).
  * **Feed em Tempo Real:** √öltimas mensagens (anonimizadas) passando na tela.

#### 3\. Tabela de Dados (Schema Sugerido)

```sql
CREATE TABLE interactions (
    id INTEGER PRIMARY KEY,
    user_hash STRING, -- Anonimizado! LGPD!
    topic STRING,
    sentiment_score FLOAT,
    region STRING,
    timestamp DATETIME
);
```

-----

## ‚úÖ Definition of Done (DoD) - Dia 1

  - [ ] Banco de dados criado.
  - [ ] Script Python que l√™ uma string "Odeio esse buraco na rua" e classifica como "Negativo/Infraestrutura".
  - [ ] Tela React "Hello World" rodando.
